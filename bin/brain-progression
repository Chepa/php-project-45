#!/usr/bin/env php

<?php

include 'vendor/autoload.php';

use function cli\line;
use function cli\prompt;

line('Welcome to the Brain Games!');
$name = prompt('May I have your name?');
line("Hello, $name!");
line('What number is missing in the progression?');

$totalGames = 3;
$success = 0;

$numbers = [];
$games = [];

for ($i = 0; $i < $totalGames; $i++) {
    $step = rand(1,10);
    $countNumbers = 10;
    $missingPosition = rand(0,$countNumbers - 1);
    $startFrom = rand(1,100);

    $total = $startFrom;
    $numbers = [$startFrom];

    for ($k = 0; $k < $countNumbers; $k++) {
        $total += $step;
        $numbers[] = $total;
    }

    $result = $numbers[$missingPosition];
    $numbers[$missingPosition] = '...';

    $answer = prompt('Question: ' . implode(' ', $numbers));
    $success += $answer == $result ? 1 : 0;
    line("Your answer: $answer");
    line($answer == $result ? 'Correct!' : "'$answer' is wrong answer ;(. Correct answer was '$result'.");
    line($success == $totalGames ? "Congratulations, $name!" : "Let's try again, $name!");
}



